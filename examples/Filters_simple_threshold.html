<!DOCTYPE html>
<html>
<head>
    <title>EaselJS: Filters Example</title>

	<link href="assets/demoStyles.css" rel="stylesheet" type="text/css" />

	<script type="text/javascript" src="../src/easeljs/utils/UID.js"></script>
	<script type="text/javascript" src="../src/easeljs/geom/Matrix2D.js"></script>
	<script type="text/javascript" src="../src/easeljs/events/EventDispatcher.js"></script>
	<script type="text/javascript" src="../src/easeljs/display/DisplayObject.js"></script>
	<script type="text/javascript" src="../src/easeljs/display/Container.js"></script>
	<script type="text/javascript" src="../src/easeljs/display/Stage.js"></script>
	<script type="text/javascript" src="../src/easeljs/events/MouseEvent.js"></script>
	<script type="text/javascript" src="../src/easeljs/utils/Ticker.js"></script>
	<script type="text/javascript" src="../src/easeljs/display/Bitmap.js"></script>
	<script type="text/javascript" src="../src/easeljs/filters/Filter.js"></script>
	<script type="text/javascript" src="../src/easeljs/filters/ThresholdFilter.js"></script>

	<!-- We also provide hosted minified versions of all CreateJS libraries.
	  http://code.createjs.com -->

    <script type="text/javascript">
        var img;
        var stage;
        var angle;
        var canvas;
        var range;
        var speed;

        function init() {
            angle = 0;
            range = 30;
            speed = 0.2;
            img = new Image();
            img.onload = handleImageLoad;
            img.src = "assets/photo-hires.jpg";
        }

        function handleImageLoad() {
            stage = new createjs.Stage("testCanvas");
            bmp = new createjs.Bitmap(img);
            bmp.cache(0,0,img.width,img.height);
            stage.addChild(bmp);

			createjs.Ticker.setFPS(15);
			createjs.Ticker.addEventListener("tick", tick);
        }

        function tick(event) {
            angle += speed;

            var value = Math.sin(angle) * 0xff/2 + 0xff/2; // Between 0 and 0xFF

            // maintain any channels that "fail" by passing "true" to the failColor
            bmp.filters = [new createjs.ThresholdFilter(value, value, value, 0xff0000, true)];
            bmp.updateCache();
            
            stage.update(event);
        }

    </script>
</head>
<body onload="init()">

	<header id="header" class="EaselJS">
	    <h1><span class="text-product">Easel<strong>JS</strong></span> Threshold Filter Example</h1>
	    <p>This sample loads an image, and applies a blur filter each frame with a varying value.</p>
	</header>

    <canvas id="testCanvas" width="960" height="400"></canvas>

</body>
</html>